'use strict';
const { dedent } = require('../utils.js');
const { worker } = require('../hooks.js');

// REQUIRES INTEGRATION TEST
/* c8 ignore start */
module.exports = class Hook {
    constructor(interpreter, { hooks }) {
        this.interpreter = interpreter;
        for (const key of worker)
            this[key] = hooks?.worker?.[key];
    }
    toJSON() {
        const hooks = {};
        // exclude `onReady` callback
        for (const key of worker.slice(1)) {
            if (this[key]) hooks[key] = dedent(this[key]());
        }
        return hooks;
    }
}
/* c8 ignore stop */
