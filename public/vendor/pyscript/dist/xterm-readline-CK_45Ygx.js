const t=function({onlyFirst:t=!1}={}){return new RegExp("(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]",t?void 0:"g")}();function e(t,{ambiguousAsWide:e=!1}={}){return function(t){if(!Number.isSafeInteger(t))throw new TypeError(`Expected a code point, got \`${typeof t}\`.`)}(t),12288===(s=t)||s>=65281&&s<=65376||s>=65504&&s<=65510||function(t){return t>=4352&&t<=4447||8986===t||8987===t||9001===t||9002===t||t>=9193&&t<=9196||9200===t||9203===t||9725===t||9726===t||9748===t||9749===t||t>=9776&&t<=9783||t>=9800&&t<=9811||9855===t||t>=9866&&t<=9871||9875===t||9889===t||9898===t||9899===t||9917===t||9918===t||9924===t||9925===t||9934===t||9940===t||9962===t||9970===t||9971===t||9973===t||9978===t||9981===t||9989===t||9994===t||9995===t||10024===t||10060===t||10062===t||t>=10067&&t<=10069||10071===t||t>=10133&&t<=10135||10160===t||10175===t||11035===t||11036===t||11088===t||11093===t||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12287||t>=12289&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12591||t>=12593&&t<=12686||t>=12688&&t<=12773||t>=12783&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=94176&&t<=94180||t>=94192&&t<=94198||t>=94208&&t<=101589||t>=101631&&t<=101662||t>=101760&&t<=101874||t>=110576&&t<=110579||t>=110581&&t<=110587||110589===t||110590===t||t>=110592&&t<=110882||110898===t||t>=110928&&t<=110930||110933===t||t>=110948&&t<=110951||t>=110960&&t<=111355||t>=119552&&t<=119638||t>=119648&&t<=119670||126980===t||127183===t||127374===t||t>=127377&&t<=127386||t>=127488&&t<=127490||t>=127504&&t<=127547||t>=127552&&t<=127560||127568===t||127569===t||t>=127584&&t<=127589||t>=127744&&t<=127776||t>=127789&&t<=127797||t>=127799&&t<=127868||t>=127870&&t<=127891||t>=127904&&t<=127946||t>=127951&&t<=127955||t>=127968&&t<=127984||127988===t||t>=127992&&t<=128062||128064===t||t>=128066&&t<=128252||t>=128255&&t<=128317||t>=128331&&t<=128334||t>=128336&&t<=128359||128378===t||128405===t||128406===t||128420===t||t>=128507&&t<=128591||t>=128640&&t<=128709||128716===t||t>=128720&&t<=128722||t>=128725&&t<=128728||t>=128732&&t<=128735||128747===t||128748===t||t>=128756&&t<=128764||t>=128992&&t<=129003||129008===t||t>=129292&&t<=129338||t>=129340&&t<=129349||t>=129351&&t<=129535||t>=129648&&t<=129660||t>=129664&&t<=129674||t>=129678&&t<=129734||129736===t||t>=129741&&t<=129756||t>=129759&&t<=129770||t>=129775&&t<=129784||t>=131072&&t<=196605||t>=196608&&t<=262141}(t)||e&&function(t){return 161===t||164===t||167===t||168===t||170===t||173===t||174===t||t>=176&&t<=180||t>=182&&t<=186||t>=188&&t<=191||198===t||208===t||215===t||216===t||t>=222&&t<=225||230===t||t>=232&&t<=234||236===t||237===t||240===t||242===t||243===t||t>=247&&t<=250||252===t||254===t||257===t||273===t||275===t||283===t||294===t||295===t||299===t||t>=305&&t<=307||312===t||t>=319&&t<=322||324===t||t>=328&&t<=331||333===t||338===t||339===t||358===t||359===t||363===t||462===t||464===t||466===t||468===t||470===t||472===t||474===t||476===t||593===t||609===t||708===t||711===t||t>=713&&t<=715||717===t||720===t||t>=728&&t<=731||733===t||735===t||t>=768&&t<=879||t>=913&&t<=929||t>=931&&t<=937||t>=945&&t<=961||t>=963&&t<=969||1025===t||t>=1040&&t<=1103||1105===t||8208===t||t>=8211&&t<=8214||8216===t||8217===t||8220===t||8221===t||t>=8224&&t<=8226||t>=8228&&t<=8231||8240===t||8242===t||8243===t||8245===t||8251===t||8254===t||8308===t||8319===t||t>=8321&&t<=8324||8364===t||8451===t||8453===t||8457===t||8467===t||8470===t||8481===t||8482===t||8486===t||8491===t||8531===t||8532===t||t>=8539&&t<=8542||t>=8544&&t<=8555||t>=8560&&t<=8569||8585===t||t>=8592&&t<=8601||8632===t||8633===t||8658===t||8660===t||8679===t||8704===t||8706===t||8707===t||8711===t||8712===t||8715===t||8719===t||8721===t||8725===t||8730===t||t>=8733&&t<=8736||8739===t||8741===t||t>=8743&&t<=8748||8750===t||t>=8756&&t<=8759||8764===t||8765===t||8776===t||8780===t||8786===t||8800===t||8801===t||t>=8804&&t<=8807||8810===t||8811===t||8814===t||8815===t||8834===t||8835===t||8838===t||8839===t||8853===t||8857===t||8869===t||8895===t||8978===t||t>=9312&&t<=9449||t>=9451&&t<=9547||t>=9552&&t<=9587||t>=9600&&t<=9615||t>=9618&&t<=9621||9632===t||9633===t||t>=9635&&t<=9641||9650===t||9651===t||9654===t||9655===t||9660===t||9661===t||9664===t||9665===t||t>=9670&&t<=9672||9675===t||t>=9678&&t<=9681||t>=9698&&t<=9701||9711===t||9733===t||9734===t||9737===t||9742===t||9743===t||9756===t||9758===t||9792===t||9794===t||9824===t||9825===t||t>=9827&&t<=9829||t>=9831&&t<=9834||9836===t||9837===t||9839===t||9886===t||9887===t||9919===t||t>=9926&&t<=9933||t>=9935&&t<=9939||t>=9941&&t<=9953||9955===t||9960===t||9961===t||t>=9963&&t<=9969||9972===t||t>=9974&&t<=9977||9979===t||9980===t||9982===t||9983===t||10045===t||t>=10102&&t<=10111||t>=11094&&t<=11097||t>=12872&&t<=12879||t>=57344&&t<=63743||t>=65024&&t<=65039||65533===t||t>=127232&&t<=127242||t>=127248&&t<=127277||t>=127280&&t<=127337||t>=127344&&t<=127373||127375===t||127376===t||t>=127387&&t<=127404||t>=917760&&t<=917999||t>=983040&&t<=1048573||t>=1048576&&t<=1114109}(t)?2:1;var s}const s=new Intl.Segmenter,i=/^(?:\p{Default_Ignorable_Code_Point}|\p{Control}|\p{Mark}|\p{Surrogate})+$/v,r=/^[\p{Default_Ignorable_Code_Point}\p{Control}\p{Format}\p{Mark}\p{Surrogate}]+/v,o=/^\p{RGI_Emoji}$/v;function n(t){return t.replace(r,"")}function h(t){return i.test(t)}function a(t,s){let i=0;if(t.length>1)for(const r of t.slice(1))r>="ï¼€"&&r<="ï¿¯"&&(i+=e(r.codePointAt(0),s));return i}function l(i,r={}){if("string"!=typeof i||0===i.length)return 0;const{ambiguousIsNarrow:l=!0,countAnsiEscapeCodes:u=!1}=r;let c=i;if(u||(c=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(t,"")}(c)),0===c.length)return 0;let p=0;const d={ambiguousAsWide:!l};for(const{segment:t}of s.segment(c)){if(h(t))continue;if(o.test(t)){p+=2;continue}p+=e(n(t).codePointAt(0),d),p+=a(t,d)}return p}var u,c,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d={},f={};Object.defineProperty(f,"__esModule",{value:!0}),f.InputType=void 0,f.parseInput=function(t){return Array.from(function*(t){let e=[];const s=t[Symbol.iterator]();for(let t=s.next();!t.done;t=s.next()){const i=t.value;if(i.length>1){e.push(i);continue}const r=i.charCodeAt(0);if(e.length>0&&(r<32||127===r)&&(yield{inputType:u.Text,data:e},e=[]),27!==r)if(r<32||127===r){let t=u.UnsupportedControlChar;switch(r){case 1:t=u.CtrlA;break;case 3:t=u.CtrlC;break;case 4:t=u.CtrlD;break;case 5:t=u.CtrlE;break;case 11:t=u.CtrlK;break;case 17:t=u.CtrlQ;break;case 19:t=u.CtrlS;break;case 21:t=u.CtrlU;break;case 13:t=u.Enter;break;case 127:t=u.Backspace;break;case 12:t=u.CtrlL}yield{inputType:t,data:[i]}}else e.push(i);else{const t=s.next();if(t.done){e.push("");continue}let i=u.UnsupportedEscape;if("["!==t.value){"\r"===t.value&&(i=u.AltEnter),yield{inputType:i,data:["",t.value]};continue}const r=s.next();if(r.done)continue;if(r.value>="0"&&r.value<="9"){let t=r.value;const e=s.next();if(e.done)return;if(e.value>="0"&&e.value<="9")t+=e.value;else if("~"!==e.value)continue;"3"===t&&(i=u.Delete),yield{inputType:i,data:["","[",t,"~"]};continue}switch(r.value){case"A":i=u.ArrowUp;break;case"B":i=u.ArrowDown;break;case"C":i=u.ArrowRight;break;case"D":i=u.ArrowLeft;break;case"F":i=u.End;break;case"H":i=u.Home;break;case"\r":i=u.AltEnter}yield{inputType:i,data:["","[",r.value]}}}e.length>0&&(yield{inputType:u.Text,data:e})}(t))},(c=u||(f.InputType=u={}))[c.Text=0]="Text",c[c.AltEnter=1]="AltEnter",c[c.ArrowUp=2]="ArrowUp",c[c.ArrowDown=3]="ArrowDown",c[c.ArrowLeft=4]="ArrowLeft",c[c.ArrowRight=5]="ArrowRight",c[c.Delete=6]="Delete",c[c.Backspace=7]="Backspace",c[c.CtrlA=8]="CtrlA",c[c.CtrlC=9]="CtrlC",c[c.CtrlD=10]="CtrlD",c[c.CtrlE=11]="CtrlE",c[c.CtrlK=12]="CtrlK",c[c.CtrlL=13]="CtrlL",c[c.CtrlQ=14]="CtrlQ",c[c.CtrlS=15]="CtrlS",c[c.CtrlU=16]="CtrlU",c[c.End=17]="End",c[c.Enter=18]="Enter",c[c.Home=19]="Home",c[c.ShiftEnter=20]="ShiftEnter",c[c.UnsupportedControlChar=21]="UnsupportedControlChar",c[c.UnsupportedEscape=22]="UnsupportedEscape";var y={},g={};Object.defineProperty(g,"__esModule",{value:!0}),g.LineBuffer=void 0,g.LineBuffer=class{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(t,e){this.buf=t,this.pos=e}insert(t){const e=t.length,s=this.pos===this.buf.length;return this.buf=s?this.buf+t:this.buf.slice(0,this.pos)+t+this.buf.slice(this.pos),this.pos+=e,s}moveBack(t){const e=this.prevPos(t);return void 0!==e&&(this.pos=e,!0)}moveForward(t){const e=this.nextPos(t);return void 0!==e&&(this.pos=e,!0)}moveHome(){const t=this.startOfLine();return this.pos>t&&(this.pos=t,!0)}moveEnd(){const t=this.endOfLine();return this.pos!==t&&(this.pos=t,!0)}startOfLine(){const t=this.buf.slice(0,this.pos).lastIndexOf("\n");return-1!==t?t+1:0}endOfLine(){const t=this.buf.slice(this.pos).indexOf("\n");return-1!==t?this.pos+t:this.buf.length}moveLineUp(t){const e=this.buf.slice(0,this.pos).lastIndexOf("\n");if(-1===e)return!1;const s=[...this.buf.slice(e+1,this.pos)].length;let i=this.buf.slice(0,e).lastIndexOf("\n");-1===i?i=0:i+=1;let r=e;for(let e=1;e<t&&0!==i;e++)r=i-1,i=this.buf.slice(0,r).lastIndexOf("\n"),-1===i?i=0:i+=1;const o=[...this.buf.slice(i,r)].slice(0,s);let n=e;return o.length>0&&(n=o.map(t=>t.length).reduce((t,e)=>t+e,0),n=i+n),this.pos=n,!0}moveLineDown(t){const e=this.buf.slice(this.pos).indexOf("\n");if(-1===e)return!1;let s=this.buf.slice(0,this.pos).lastIndexOf("\n");-1===s?s=0:s+=1;const i=[...this.buf.slice(s,this.pos)].length;let r=this.pos+e+1,o=this.buf.slice(r).indexOf("\n");o=-1===o?this.buf.length:r+o;for(let e=1;e<t&&o!==this.buf.length;e++)r=o+1,o=this.buf.slice(r).indexOf("\n"),o=-1===o?this.buf.length:r+o;const n=[...this.buf.slice(r,o)];return i<n.length?this.pos=n.slice(0,i).map(t=>t.length).reduce((t,e)=>t+e,0)+r:this.pos=o,!0}set_pos(t){this.pos=t}prevPos(t){if(0===this.pos)return;const e=this.buf.slice(0,this.pos);return this.pos-[...e].slice(-t).map(t=>t.length).reduce((t,e)=>t+e,0)}nextPos(t){if(this.pos===this.buf.length)return;const e=this.buf.slice(this.pos);return this.pos+[...e].slice(0,t).map(t=>t.length).reduce((t,e)=>t+e,0)}backspace(t){const e=this.prevPos(t);return void 0!==e&&(this.buf=this.buf.slice(0,e)+this.buf.slice(this.pos),this.pos=e,!0)}delete(t){const e=this.nextPos(t);return void 0!==e&&(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(e),!0)}deleteEndOfLine(){if(0==this.buf.length||this.pos==this.buf.length)return!1;const t=this.pos,e=this.endOfLine();return t==e?this.delete(1):this.buf=this.buf.slice(0,t)+this.buf.slice(e),!0}};var w=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(y,"__esModule",{value:!0}),y.State=y.Layout=y.Position=void 0;const v=g,b=w(l);class m{constructor(t,e){this.row=void 0!==t?t:0,this.col=void 0!==e?e:0}}y.Position=m;class C{constructor(t){this.promptSize=t,this.cursor=new m,this.end=new m}}y.Layout=C,y.State=class{constructor(t,e,s,i){this.line=new v.LineBuffer,this.highlighting=!1,this.prompt=t,this.tty=e,this.highlighter=s,this.history=i,this.promptSize=e.calculatePosition(t,new m),this.layout=new C(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):!!this.highlighting&&(this.highlighting=!1,!0)}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new m,this.layout.end=new m,this.refresh()}editInsert(t){const e=this.line.insert(t),s=t.includes("\n");if(e&&!s){const e=(0,b.default)(t);e>0&&this.layout.cursor.col+e<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=e,this.layout.end.col+=e,this.tty.write(t)):this.refresh()}else this.refresh()}update(t){this.line.update(t,t.length),this.refresh()}editBackspace(t){this.line.backspace(t)&&this.refresh()}editDelete(t){this.line.delete(t)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const t=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,t,this.highlighter),this.layout=t}moveCursorBack(t){this.line.moveBack(t)&&this.moveCursor()}moveCursorForward(t){this.line.moveForward(t)&&this.moveCursor()}moveCursorUp(t){this.line.moveLineUp(t)?this.moveCursor():this.previousHistory()}moveCursorDown(t){this.line.moveLineDown(t)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(-1===this.history.cursor&&this.line.length()>0)return;const t=this.history.prev();void 0!==t&&this.update(t)}nextHistory(){if(-1===this.history.cursor)return;const t=this.history.next();void 0!==t?this.update(t):this.update("")}moveCursor(){const t=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);t!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,t),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},t)))}};var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.History=void 0,T.History=class{constructor(t){this.entries=[],this.cursor=-1,this.maxEntries=t}saveToLocalStorage(){const t=null===window||void 0===window?void 0:window.localStorage;void 0!==t&&t.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const t=null===window||void 0===window?void 0:window.localStorage;if(void 0!==t){const e=t.getItem("history");if(null==e)return;try{const s=JSON.parse(e);Array.isArray(s)&&void 0===s.find(t=>"string"!=typeof t)?this.entries=s:(this.entries=[],t.setItem("history","[]"))}catch(e){this.entries=[],t.setItem("history","[]")}}}append(t){this.resetCursor(),this.entries.includes(t)?(this.entries.splice(this.entries.indexOf(t),1),this.entries.unshift(t)):this.entries.unshift(t),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(-1!==this.cursor)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}};var k={},I=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(k,"__esModule",{value:!0}),k.Tty=void 0;const E=I(l);k.Tty=class{constructor(t,e,s,i){this.tabWidth=s,this.col=t,this.row=e,this.out=i}write(t){return this.out.write(t)}print(t){return this.out.print(t)}println(t){return this.out.println(t)}clearScreen(){this.out.write("[H[2J")}calculatePosition(t,e){const s=Object.assign({},e);let i=0;return[...t].forEach(t=>{if("\n"===t)return s.row+=1,void(s.col=0);let e=0;if("\t"===t)e=this.tabWidth-s.col%this.tabWidth;else{let s;[s,i]=function(t,e){return 1===e?"["===t?[0,2]:[0,0]:2===e?";"===t||t[0]>="0"&&t[0]<="9"?[0,e]:[0,0]:""===t?[0,1]:"\n"===t?[0,e]:[(0,E.default)(t),e]}(t,i),e=s}s.col+=e,s.col>this.col&&(s.row+=1,s.col=e)}),s.col===this.col&&(s.col=0,s.row+=1),s}computeLayout(t,e){const s=Object.assign({},t),i=e.pos,r=this.calculatePosition(e.buf.slice(0,e.pos),t);return{promptSize:s,cursor:r,end:i===e.buf.length?Object.assign({},r):this.calculatePosition(e.buf.slice(i),r)}}refreshLine(t,e,s,i,r){const o=i.cursor,n=i.end;this.clearOldRows(s),this.write(r.highlightPrompt(t)),this.write(r.highlight(e.buf,e.pos)),0===n.col&&n.row>0&&"\n"!==e.buf[e.buf.length-1]&&this.write("\n");const h=n.row-o.row;h>0&&this.write(`[${h}A`),o.col>0?this.write(`\r[${o.col}C`):this.write("\r")}clearOldRows(t){const e=t.cursor.row,s=t.end.row,i=Math.max(s-e,0);i>0&&this.write(`[${i}B`);for(let t=0;t<s;t++)this.write("\r[0K[A");this.write("\r[0K")}moveCursor(t,e){if(e.row>t.row){const s=e.row-t.row;1===s?this.write("[B"):this.write(`[${s}B`)}else if(e.row<t.row){const s=t.row-e.row;1===s?this.write("[A"):this.write(`[${s}A`)}if(e.col>t.col){const s=e.col-t.col;1===s?this.write("[C"):this.write(`[${s}C`)}else if(e.col<t.col){const s=t.col-e.col;1===s?this.write("[D"):this.write(`[${s}D`)}}};var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.IdentityHighlighter=void 0,S.IdentityHighlighter=class{highlight(t,e){return t}highlightPrompt(t){return t}highlightChar(t,e){return!1}},Object.defineProperty(d,"__esModule",{value:!0});var A=d.Readline=void 0;const H=f,x=y,_=T,O=k,L=S;A=d.Readline=class{constructor(){this.highlighter=new L.IdentityHighlighter,this.history=new _.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new x.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=t=>{},this.history.restoreFromLocalStorage()}activate(t){this.term=t,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach(t=>t.dispose())}appendHistory(t){this.history.append(t)}setHighlighter(t){this.highlighter=t}setCheckHandler(t){this.checkHandler=t}setCtrlCHandler(t){this.ctrlCHandler=t}setPauseHandler(t){this.pauseHandler=t}writeReady(){return!this.highWater}write(t){const e=(t="\n"===t?"\r\n":(t=t.replace(/^\n/,"\r\n")).replace(/([^\r])\n/g,"$1\r\n")).length;this.watermark+=e,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(t,()=>{this.watermark=Math.max(this.watermark-e,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)})}print(t){return this.write(t)}println(t){return this.write(t+"\r\n")}output(){return this}tty(){var t,e;return void 0!==(null===(e=null===(t=this.term)||void 0===t?void 0:t.options)||void 0===e?void 0:e.tabStopWidth)?new O.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new O.Tty(0,0,8,this.output())}read(t){return new Promise((e,s)=>{void 0!==this.term?(this.state=new x.State(t,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:t,resolve:e,reject:s}):s("addon is not active")})}handleKeyEvent(t){return"Enter"!==t.key||!t.shiftKey||("keydown"===t.type&&this.readKey({inputType:H.InputType.ShiftEnter,data:["\r"]}),!1)}readData(t){const e=(0,H.parseInput)(t);e.length>1||e[0].inputType===H.InputType.Text&&e[0].data.length>1?this.readPaste(e):this.readKey(e[0])}readPaste(t){const e=t.map(t=>t.inputType===H.InputType.Enter?{inputType:H.InputType.Text,data:["\n"]}:t);for(const t of e)t.inputType===H.InputType.Text?this.state.editInsert(t.data.join("")):this.readKey(t)}readKey(t){var e,s,i;if(void 0!==this.activeRead)switch(t.inputType){case H.InputType.Text:this.state.editInsert(t.data.join(""));break;case H.InputType.AltEnter:case H.InputType.ShiftEnter:this.state.editInsert("\n");break;case H.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),null===(e=this.term)||void 0===e||e.write("\r\n"),this.history.append(this.state.buffer()),null===(s=this.activeRead)||void 0===s||s.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert("\n");break;case H.InputType.CtrlC:this.state.moveCursorToEnd(),null===(i=this.term)||void 0===i||i.write("^C\r\n"),this.state=new x.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case H.InputType.CtrlS:this.pauseHandler(!1);break;case H.InputType.CtrlU:this.state.update("");break;case H.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case H.InputType.CtrlQ:this.pauseHandler(!0);break;case H.InputType.CtrlL:this.state.clearScreen();break;case H.InputType.Home:case H.InputType.CtrlA:this.state.moveCursorHome();break;case H.InputType.End:case H.InputType.CtrlE:this.state.moveCursorEnd();break;case H.InputType.Backspace:this.state.editBackspace(1);break;case H.InputType.Delete:case H.InputType.CtrlD:this.state.editDelete(1);break;case H.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case H.InputType.ArrowRight:this.state.moveCursorForward(1);break;case H.InputType.ArrowUp:this.state.moveCursorUp(1);break;case H.InputType.ArrowDown:this.state.moveCursorDown(1);case H.InputType.UnsupportedControlChar:case H.InputType.UnsupportedEscape:}else switch(t.inputType){case H.InputType.CtrlC:this.ctrlCHandler();break;case H.InputType.CtrlL:this.write("[H[2J")}}};var P=d.__esModule;export{A as Readline,P as __esModule,d as default};
//# sourceMappingURL=xterm-readline-CK_45Ygx.js.map
